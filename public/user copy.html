<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Or√ßamento | Revenda SaaS</title>
<style>/* ================================
   USER.CSS ‚Äî Estilo Moderno
   Compat√≠vel com user.html (2025)
   ================================ */

/* Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Inter", system-ui, -apple-system, sans-serif;
}

/* Corpo */
body {
  background: #f5f7fa;
  color: #222;
  line-height: 1.5;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

/* ================================
   LOADING
================================ */
.loading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(250, 250, 250, 0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 999;
  font-size: 1.1rem;
  color: #333;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #ccc;
  border-top: 5px solid #007bff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 12px;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ================================
   CONTAINER PRINCIPAL
================================ */
.container {
  max-width: 850px;
  width: 100%;
  background: #fff;
  margin: 40px 0;
  padding: 30px;
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
}

/* ================================
   PERFIL
================================ */
.perfil {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  margin-bottom: 25px;
  border-bottom: 2px solid #f0f0f0;
  padding-bottom: 20px;
}

.perfil-foto img {
  width: 120px;
  height: 120px;
  border-radius: 100%;
  object-fit: cover;
  border: 3px solid #eee;
}

.perfil-info {
  flex: 1;
}

.perfil-info h2 {
  font-size: 1.5rem;
  font-weight: 600;
  color: #333;
}

.perfil-info p {
  color: #666;
  font-size: 0.95rem;
  margin-top: 4px;
}

.insta-link {
  display: inline-block;
  margin-top: 8px;
  color: #e1306c;
  text-decoration: none;
  font-weight: 500;
}

.insta-link:hover {
  text-decoration: underline;
}

/* ================================
   FORMUL√ÅRIO DE EVENTO
================================ */
.form-section h3 {
  color: #333;
  margin-bottom: 15px;
  font-size: 1.2rem;
}

.form-group {
  margin-bottom: 15px;
}

label {
  display: block;
  font-weight: 500;
  color: #333;
  margin-bottom: 6px;
}

input,
textarea,
select {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 1rem;
  background: #fafafa;
  transition: 0.2s;
}

input:focus,
textarea:focus,
select:focus {
  border-color: #007bff;
  background: #fff;
  outline: none;
}

/* ================================
   PRODUTOS E SERVI√áOS
================================ */
.produtos {
  margin-top: 25px;
}

.produtos-lista {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 15px;
  margin-top: 10px;
}

.produtos-lista div {
  border: 1px solid #eee;
  background: #fafafa;
  padding: 15px;
  border-radius: 12px;
  transition: 0.2s ease;
}

.produtos-lista div:hover {
  background: #fff;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

/* ================================
   CUPOM DE DESCONTO
================================ */
.cupom {
  margin-top: 30px;
}

.cupom-container {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-top: 10px;
}

#cupomInput {
  flex: 1;
}

#btnAplicarCupom {
  background: #007bff;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 16px;
  cursor: pointer;
  transition: 0.2s;
}

#btnAplicarCupom:hover {
  background: #0056b3;
}

#cupomStatus {
  font-size: 0.9rem;
  color: #555;
}

/* ================================
   FORMAS DE PAGAMENTO
================================ */
.pagamento {
  margin-top: 30px;
}

.formas-lista {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  margin-top: 10px;
}

.formas-lista button {
  background: #fafafa;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.formas-lista button:hover {
  background: #007bff;
  color: white;
}

/* ================================
   RESUMO DO OR√áAMENTO
================================ */
.resumo {
  margin-top: 30px;
  background: #f9fafc;
  border-radius: 12px;
  padding: 20px;
}

.resumo h3 {
  margin-bottom: 15px;
}

.resumo p {
  display: flex;
  justify-content: space-between;
  margin: 6px 0;
  font-size: 0.95rem;
}

.resumo hr {
  border: none;
  border-top: 1px solid #eee;
  margin: 10px 0;
}

/* ================================
   BOT√ïES DE A√á√ÉO
================================ */
.acoes {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 25px;
}

.acoes button {
  padding: 12px 20px;
  border: none;
  border-radius: 10px;
  background: #007bff;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}

.acoes button:hover {
  background: #0056b3;
}

.acoes button:disabled {
  background: #ccc;
  cursor: not-allowed;
}

/* ================================
   RESPONSIVIDADE
================================ */
@media (max-width: 700px) {
  .perfil {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .perfil-foto img {
    width: 100px;
    height: 100px;
  }

  .cupom-container {
    flex-direction: column;
  }

  .acoes {
    flex-direction: column;
  }
}
/* Ajuste da imagem de perfil (placeholder) */
.perfil-foto {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 120px;
  height: 120px;
  flex-shrink: 0;
}

.perfil-foto img {
  width: 100%;
  height: 100%;
  max-width: 120px;
  max-height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #e0e0e0;
  background: #f9f9f9;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}
/* Imagem de produtos e servi√ßos (placeholder quadrado) */
.produtos-lista img,
.servicos-lista img {
  width: 120px;
  height: 120px;
  object-fit: cover;
  border-radius: 12px;
  border: 2px solid #eee;
  background-color: #fafafa;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Efeito ao passar o mouse */
.produtos-lista img:hover,
.servicos-lista img:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Container dos cards de produtos/servi√ßos */
.produtos-lista,
.servicos-lista {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: flex-start;
  align-items: flex-start;
}

.produto-card,
.servico-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 12px;
  border-radius: 16px;
  background: #fff;
  border: 1px solid #eaeaea;
  transition: box-shadow 0.2s ease;
}

.produto-card:hover,
.servico-card:hover {
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
}
</style>
</head>

<body>
  <div id="loadingMessage" class="loading">
    <div class="spinner"></div>
    <p>Carregando configura√ß√µes...</p>
  </div>

  <div id="orcamentoContainer" class="container" style="display:none;">
    
    <section id="perfilFotografo" class="perfil">
      <div class="perfil-foto">
        <img id="profileImageDisplay" src="/static/img/placeholder.png" alt="Foto do fot√≥grafo" />
      </div>
      <div class="perfil-info">
        <h2 id="nomeProfissionalDisplay">Carregando fot√≥grafo...</h2>
        <p id="tipoFotografiaDisplay">...</p>
        <a id="instagramLink" href="#" target="_blank" class="insta-link">
          <span id="instagramDisplay">Instagram</span>
        </a>
      </div>

      <div class="form-group">
        <label for="apresentacaoFotografo">üó£Ô∏è Apresenta√ß√£o curta</label>
        <textarea id="apresentacaoFotografo" rows="2" maxlength="160" placeholder="Ex: Apaixonado por registrar hist√≥rias √∫nicas e aut√™nticas."></textarea>
      </div>
    </section>

    <section id="formularioOrcamento" class="form-section">
      <h3>üìã Informa√ß√µes do Evento</h3>
      <form id="orcamentoForm">
        <div id="formularioDinamico"></div>

        <div class="form-group">
          <label for="dataevento">üìÖ Data do evento</label>
          <input type="date" id="dataevento" required />
        </div>

        <div class="form-group">
          <label for="cidadeevento">üìç Cidade</label>
          <input type="text" id="cidadeevento" placeholder="Digite a cidade do evento" required />
        </div>
      </form>
    </section>

    <section id="produtosSection" class="produtos">
      <h3>üéûÔ∏è Pacotes e Servi√ßos</h3>
      <p class="descricao">Selecione os servi√ßos desejados.</p>

      <div>
        <h4>Inclusos</h4>
        <div id="listaProdutosObrigatorios" class="produtos-lista"></div>

        <h4>Adicionais</h4>
        <div id="listaProdutosOpcionais" class="produtos-lista"></div>
      </div>
    </section>

    <section id="cupomSection" class="cupom">
      <h3>üéÅ Cupom de Desconto</h3>
      <div class="cupom-container">
        <input type="text" id="cupomInput" placeholder="Digite seu cupom (opcional)" />
        <button type="button" id="btnAplicarCupom">Aplicar</button>
        <p id="cupomStatus"></p>
      </div>
    </section>

    <section id="pagamentoSection" class="pagamento">
      <h3>üí≥ Formas de Pagamento</h3>
      <p class="descricao">Escolha como deseja pagar.</p>
      <div id="listaFormasPagamento" class="formas-lista"></div>
    </section>

    <section id="resumoSection" class="resumo">
      <h3>üßæ Resumo do Or√ßamento</h3>
      <div id="resumoOrcamento">
        <p><strong>Valor Base dos Servi√ßos:</strong> <span id="valorBase">R$ 0,00</span></p>
        <p><strong>Acr√©scimo Sazonal:</strong> <span id="valorSazonal">R$ 0,00</span></p>
        <p><strong>Acr√©scimo de Localidade:</strong> <span id="valorLocalidade">R$ 0,00</span></p>
        <p><strong>Desconto do Cupom:</strong> <span id="valorCupom">R$ 0,00</span></p>
        <p><strong>Acr√©scimo/Desconto do Pagamento:</strong> <span id="valorPagamento">R$ 0,00</span></p>
        <hr />
        <p><strong>Total a Pagar:</strong> <span id="valorTotalFinal">R$ 0,00</span></p>
        <p><strong>Forma de Pagamento:</strong> <span id="nomeFormaPagamentoFinal">‚Äî</span></p>
      </div>
    </section>

    <section id="acoesSection" class="acoes">
      <button id="btnGerarWhatsApp" disabled>üîó Gerar Link</button>
      <button id="btnCopiarLink" disabled>üìã Copiar Link</button>
      <button id="btnWhatsApp" disabled>üí¨ Enviar via WhatsApp</button>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="{{ url_for('static', filename='js/user.js') }}"></script>
</body>
</html>